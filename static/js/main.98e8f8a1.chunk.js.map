{"version":3,"sources":["custom-hooks.js","components/SearchInput.js","components/Sentinel.js","components/List.js","App.js","index.js"],"names":["useObserver","_ref","target","onIntersect","useEffect","observer","IntersectionObserver","observe","current","unobserve","useSearch","_useState","useState","_useState2","Object","slicedToArray","data","setData","_useState3","_useState4","counter","setCounter","_useState5","_useState6","errorMessage","setErrorMessage","validateQuery","q","isNaN","includes","parseFloat","Math","floor","parseInt","loadInitial","validatedQ","list","toConsumableArray","Array","map","_","index","length","loadMore","concat","useInputValue","initialValue","arguments","undefined","_useState7","_useState8","inputValue","setInputValue","changeInput","e","value","keyInput","callback","which","keyCode","SearchInputWrapper","styled","div","_templateObject","StyledForm","form","_templateObject2","StyledInput","input","_templateObject3","memo","props","react_default","a","createElement","noValidate","onSubmit","preventDefault","type","placeholder","onChange","onInputChange","onKeyPress","onInputKeyPress","required","SentinelDiv","Sentinel_templateObject","Sentinel","useRef","isIntersecting","ref","fadein","keyframes","List_templateObject","ListWrapper","List_templateObject2","Card","List_templateObject3","_ref$data","item","key","AppContainer","App_templateObject","AppHeader","App_templateObject2","ItemCounter","App_templateObject3","ErrorMsg","_templateObject4","_useInputValue","_useSearch","injectedLoadInitial","components_SearchInput","event","components_List","components_Sentinel","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.98e8f8a1.chunk.js","sourcesContent":["import { useState, useEffect } from \"react\";\n\n/*\n * @useObserver {function} hook providing observer to sentinel component\n */\nexport const useObserver = ({ target, onIntersect }) => {\n  useEffect(() => {\n    const observer = new IntersectionObserver(onIntersect);\n    if (!target) return;\n\n    observer.observe(target.current);\n\n    return () => {\n      observer.unobserve(target.current);\n    };\n  });\n};\n\n/*\n * @useSearch {function} hook providing input submission helpers and validation\n */\nexport const useSearch = () => {\n  const [data, setData] = useState([]);\n  const [counter, setCounter] = useState(0);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  // helper function to apply validation and conditionally return an integer\n  const validateQuery = q => {\n    if (\n      isNaN(q) ||\n      (q.includes(\".\") && parseFloat(q) > Math.floor(parseFloat(q)))\n    ) {\n      // enforce integer only\n      setErrorMessage(\"Input must be a whole, non-zero integer\");\n      return false;\n    } else if (parseInt(q) <= 0) {\n      // enforce greater than 0\n      setErrorMessage(\"Input must be a positive non-zero integer\");\n      return false;\n    } else {\n      setErrorMessage(null);\n      return parseInt(q);\n    }\n  };\n\n  return {\n    data,\n    errorMessage,\n    loadInitial: q => {\n      const validatedQ = validateQuery(q);\n      // query is valid, perform operation\n      if (validatedQ) {\n        const list = [...Array(validatedQ)].map((_, index) => index);\n        setCounter(list.length);\n        setData(list);\n        return;\n      }\n      setCounter(0);\n      setData([]);\n    },\n    loadMore: q => {\n      const validatedQ = validateQuery(q);\n      // query is valid, perform operation\n      if (validatedQ) {\n        const list = [...Array(validatedQ)].map((_, index) => counter + index);\n        setCounter(list.length + counter);\n        setData([...data, ...list]);\n        return;\n      }\n      setCounter(0);\n      setData([]);\n    }\n  };\n};\n\n/*\n * @useInputValue {function} hook providing input logic to input component\n */\nexport const useInputValue = (initialValue = \"\") => {\n  const [inputValue, setInputValue] = useState(initialValue);\n\n  return {\n    inputValue,\n    changeInput: e => {\n      setInputValue(e.target.value);\n    },\n    keyInput: (e, callback) => {\n      if (e.which === 13 || e.keyCode === 13) {\n        callback(inputValue);\n        return true;\n      }\n      return false;\n    }\n  };\n};\n","import React, { memo } from \"react\";\nimport styled from \"styled-components\";\n\nconst SearchInputWrapper = styled.div`\n  padding: 1.5em 0 1em 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  @media (max-width: 1024px) {\n    padding: 3em 0 1em 0;\n  }\n`;\n\nconst StyledForm = styled.form`\n  display: flex;\n  flex-direction: row;\n  box-sizing: border-box;\n  border: 1px solid #dfe1e5;\n  border-radius: 8px;\n  height: 2em;\n  width: 50%;\n  background-color: #eee;\n  transition: all 0.25s ease-out;\n  &:hover {\n    box-shadow: 0 1px 6px 0 rgba(32, 33, 36, 0.28);\n    border-color: rgba(223, 225, 229, 0);\n  }\n  &:focus-within {\n    background-color: #fff;\n    border-color: #dfe1e5;\n  }\n  @media (max-width: 767px) {\n    width: 300px;\n  }\n`;\n\nconst StyledInput = styled.input`\n  border-top-left-radius: 8px;\n  border-bottom-left-radius: 8px;\n  flex-grow: 2;\n  padding: 0 1em 0 1em;\n  border: none\n  font-size: 0.75em;\n  background: none;\n  transition: all 0.25s ease-out;\n  &:focus {\n    outline: none;\n  }\n`;\n\nfunction SearchInput(props) {\n  return (\n    <SearchInputWrapper>\n      <StyledForm noValidate onSubmit={e => e.preventDefault()}>\n        <StyledInput\n          type=\"text\"\n          placeholder=\"enter a whole number\"\n          value={props.inputValue}\n          onChange={props.onInputChange}\n          onKeyPress={props.onInputKeyPress}\n          required\n        />\n      </StyledForm>\n    </SearchInputWrapper>\n  );\n}\n\nexport default memo(SearchInput);\n","import React, { useRef } from \"react\";\nimport styled from \"styled-components\";\nimport { useObserver } from \"../custom-hooks\";\n\nconst SentinelDiv = styled.div`\n  width: 100%;\n  height: 3em;\n  background: transparent;\n`;\n\nfunction Sentinel(props) {\n  const target = useRef();\n  useObserver({\n    target,\n    // argument destructures IntersectionObserverEntry.isIntersecting\n    onIntersect: ([{ isIntersecting }]) => {\n      if (isIntersecting) {\n        props.callback();\n      }\n    }\n  });\n\n  return <SentinelDiv ref={target} />;\n}\n\nexport default Sentinel;\n","import React, { memo } from \"react\";\nimport styled, { keyframes } from \"styled-components\";\n\nconst fadein = keyframes`\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n`;\n\nconst ListWrapper = styled.div`\n  display: flex;\n  flex-flow: row wrap;\n  align-items: center;\n  background-color: inherit;\n  padding: 1em 1em 0 1em;\n`;\n\nconst Card = styled.div`\n  opacity: 0;\n  animation: ${fadein} 1s ease 0.2s 1 forwards;\n  text-align: center;\n  box-sizing: border-box;\n  border-radius: 4px;\n  margin: 0.5em;\n  height: 100px;\n  flex-basis: 100%;\n`;\n\nfunction List({ data = [] }) {\n  return (\n    <ListWrapper>\n      {data.map((item, index) => (\n        <Card key={item}>{`item ${item}`}</Card>\n      ))}\n    </ListWrapper>\n  );\n}\n\nexport default memo(List);\n","import React, { memo } from \"react\";\nimport styled from \"styled-components\";\nimport { useInputValue, useSearch } from \"./custom-hooks\";\nimport SearchInput from \"./components/SearchInput\";\nimport Sentinel from \"./components/Sentinel\";\nimport List from \"./components/List\";\n\nconst AppContainer = styled.div`\n  font-family: Avenir;\n  font-size: 1.25rem;\n  padding-top: 1em;\n  height: 100vh;\n  background-color: #fafafa;\n`;\n\nconst AppHeader = styled.div`\n  text-align: center;\n  margin: 0 0.5em 0 0.5em;\n`;\n\nconst ItemCounter = styled.div`\n  text-align: center;\n  color: #0b6e4f;\n  position: fixed;\n  width: 150px;\n  border: 1px solid #eee;\n  line-height: 1em;\n  margin-left: 1em;\n  padding: 1em;\n  top: 1em;\n  font-size: 0.75em;\n\n  @media (max-width: 1024px) {\n    left: 0;\n    right: 0;\n    width: 250px;\n    margin: 0 auto;\n    top: 3.5em;\n  }\n\n  @media (max-width: 466px) {\n    left: 0;\n    right: 0;\n    width: 250px;\n    margin: 0 auto;\n    top: 5em;\n  }\n`;\n\nconst ErrorMsg = styled.div`\n  text-align: center;\n  color: #904e55;\n`;\n\n/**\n * Basic container holding configuration for infinite scroll\n * @useInputValue {function} hook providing input logic to input component\n * @useSearch {function} hook providing validation and data loading\n */\nfunction App() {\n  const { inputValue, changeInput, keyInput } = useInputValue();\n  const { errorMessage, data, loadInitial, loadMore } = useSearch();\n  const injectedLoadInitial = () => {\n    loadInitial(inputValue);\n  };\n  return (\n    <AppContainer>\n      <AppHeader>Enter the number of elements to render per batch</AppHeader>\n      <ItemCounter>Number of items rendered so far: {data.length}</ItemCounter>\n\n      <SearchInput\n        inputValue={inputValue}\n        onInputChange={changeInput}\n        onInputKeyPress={event => keyInput(event, injectedLoadInitial)}\n      />\n      {errorMessage ? (\n        <ErrorMsg>Error: {errorMessage}</ErrorMsg>\n      ) : (\n        <List data={data} />\n      )}\n      {data.length > 1 && <Sentinel callback={() => loadMore(inputValue)} />}\n    </AppContainer>\n  );\n}\n\nexport default memo(App);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}